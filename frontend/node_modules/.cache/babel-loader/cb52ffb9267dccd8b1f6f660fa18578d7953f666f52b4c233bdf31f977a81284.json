{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport store from '@/store';\nvar routes = [{\n  path: '/',\n  redirect: '/dashboard'\n}, {\n  path: '/login',\n  name: 'Login',\n  component: function component() {\n    return import('@/views/Login.vue');\n  },\n  meta: {\n    title: '登录',\n    requiresAuth: false\n  }\n}, {\n  path: '/dashboard',\n  name: 'Dashboard',\n  component: function component() {\n    return import('@/views/Dashboard.vue');\n  },\n  meta: {\n    title: '系统概览',\n    requiresAuth: true\n  }\n}, {\n  path: '/energy-efficiency',\n  name: 'EnergyEfficiency',\n  component: function component() {\n    return import('@/views/EnergyEfficiency.vue');\n  },\n  meta: {\n    title: '能效分析',\n    requiresAuth: true\n  }\n}, {\n  path: '/charging-stations',\n  name: 'ChargingStations',\n  component: function component() {\n    return import('@/views/ChargingStations.vue');\n  },\n  meta: {\n    title: '充电站管理',\n    requiresAuth: true\n  }\n}, {\n  path: '/charging-orders',\n  name: 'ChargingOrders',\n  component: function component() {\n    return import('@/views/ChargingOrders.vue');\n  },\n  meta: {\n    title: '充电订单',\n    requiresAuth: true\n  }\n}, {\n  path: '/robots',\n  name: 'Robots',\n  component: function component() {\n    return import('@/views/Robots.vue');\n  },\n  meta: {\n    title: '机器人管理',\n    requiresAuth: true\n  }\n}, {\n  path: '/system',\n  name: 'System',\n  component: function component() {\n    return import('@/views/System.vue');\n  },\n  meta: {\n    title: '系统设置',\n    requiresAuth: true,\n    roles: ['admin']\n  }\n}, {\n  path: '/user',\n  name: 'User',\n  component: function component() {\n    return import('@/views/User.vue');\n  },\n  meta: {\n    title: '个人中心',\n    requiresAuth: true\n  }\n}, {\n  path: '/404',\n  name: 'NotFound',\n  component: function component() {\n    return import('@/views/NotFound.vue');\n  },\n  meta: {\n    title: '页面不存在'\n  }\n}, {\n  path: '/:pathMatch(.*)*',\n  redirect: '/404'\n}];\nvar router = createRouter({\n  history: createWebHistory(),\n  routes: routes\n});\n\n// 全局前置守卫\nrouter.beforeEach(function (to, from, next) {\n  // 设置页面标题\n  document.title = to.meta.title ? \"\".concat(to.meta.title, \" - \\u5145\\u7535\\u7CFB\\u7EDF\") : '充电系统';\n\n  // 获取用户登录状态\n  var isLoggedIn = store.getters['user/isLoggedIn'];\n\n  // 检查页面是否需要认证\n  if (to.meta.requiresAuth && !isLoggedIn) {\n    // 未登录，重定向到登录页\n    next({\n      path: '/login',\n      query: {\n        redirect: to.fullPath\n      }\n    });\n  } else if (to.meta.roles && to.meta.roles.length > 0) {\n    // 检查用户角色权限\n    var userRoles = store.getters['user/roles'];\n\n    // 判断用户是否有权限访问\n    var hasPermission = userRoles.some(function (role) {\n      return to.meta.roles.includes(role);\n    });\n    if (hasPermission) {\n      next();\n    } else {\n      // 无权限，跳转到 404 页面\n      next({\n        path: '/404'\n      });\n    }\n  } else {\n    // 不需要认证或已登录，直接访问\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","store","routes","path","redirect","name","component","meta","title","requiresAuth","roles","router","history","beforeEach","to","from","next","document","concat","isLoggedIn","getters","query","fullPath","length","userRoles","hasPermission","some","role","includes"],"sources":["D:/software_data/Project/Y0527/CODE_BAK/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router'\r\nimport store from '@/store'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: '/dashboard'\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: () => import('@/views/Login.vue'),\r\n    meta: {\r\n      title: '登录',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: '/dashboard',\r\n    name: 'Dashboard',\r\n    component: () => import('@/views/Dashboard.vue'),\r\n    meta: {\r\n      title: '系统概览',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/energy-efficiency',\r\n    name: 'EnergyEfficiency',\r\n    component: () => import('@/views/EnergyEfficiency.vue'),\r\n    meta: {\r\n      title: '能效分析',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/charging-stations',\r\n    name: 'ChargingStations',\r\n    component: () => import('@/views/ChargingStations.vue'),\r\n    meta: {\r\n      title: '充电站管理',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/charging-orders',\r\n    name: 'ChargingOrders',\r\n    component: () => import('@/views/ChargingOrders.vue'),\r\n    meta: {\r\n      title: '充电订单',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/robots',\r\n    name: 'Robots',\r\n    component: () => import('@/views/Robots.vue'),\r\n    meta: {\r\n      title: '机器人管理',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/system',\r\n    name: 'System',\r\n    component: () => import('@/views/System.vue'),\r\n    meta: {\r\n      title: '系统设置',\r\n      requiresAuth: true,\r\n      roles: ['admin']\r\n    }\r\n  },\r\n  {\r\n    path: '/user',\r\n    name: 'User',\r\n    component: () => import('@/views/User.vue'),\r\n    meta: {\r\n      title: '个人中心',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: '/404',\r\n    name: 'NotFound',\r\n    component: () => import('@/views/NotFound.vue'),\r\n    meta: {\r\n      title: '页面不存在'\r\n    }\r\n  },\r\n  {\r\n    path: '/:pathMatch(.*)*',\r\n    redirect: '/404'\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes\r\n})\r\n\r\n// 全局前置守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  // 设置页面标题\r\n  document.title = to.meta.title ? `${to.meta.title} - 充电系统` : '充电系统'\r\n  \r\n  // 获取用户登录状态\r\n  const isLoggedIn = store.getters['user/isLoggedIn']\r\n  \r\n  // 检查页面是否需要认证\r\n  if (to.meta.requiresAuth && !isLoggedIn) {\r\n    // 未登录，重定向到登录页\r\n    next({\r\n      path: '/login',\r\n      query: { redirect: to.fullPath }\r\n    })\r\n  } else if (to.meta.roles && to.meta.roles.length > 0) {\r\n    // 检查用户角色权限\r\n    const userRoles = store.getters['user/roles']\r\n    \r\n    // 判断用户是否有权限访问\r\n    const hasPermission = userRoles.some(role => to.meta.roles.includes(role))\r\n    \r\n    if (hasPermission) {\r\n      next()\r\n    } else {\r\n      // 无权限，跳转到 404 页面\r\n      next({ path: '/404' })\r\n    }\r\n  } else {\r\n    // 不需要认证或已登录，直接访问\r\n    next()\r\n  }\r\n})\r\n\r\nexport default router "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}