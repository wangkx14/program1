{"ast":null,"code":"import _objectSpread from \"D:/software_data/Project/Y0527/CODE_BAK/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _typeof from \"D:/software_data/Project/Y0527/CODE_BAK/frontend/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.now.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.pad-start.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport axios from 'axios';\n\n// 生成后备机器人数据的函数\nfunction generateFallbackRobots() {\n  console.log('生成后备机器人数据');\n  var robots = [];\n  var statuses = ['idle', 'working', 'charging', 'error'];\n  for (var i = 1; i <= 10; i++) {\n    var status = statuses[Math.floor(Math.random() * statuses.length)];\n    var batteryLevel = Math.floor(Math.random() * 100);\n    robots.push({\n      id: i,\n      name: \"\\u673A\\u5668\\u4EBA-\".concat(i.toString().padStart(3, '0')),\n      battery_level: batteryLevel,\n      status: status,\n      last_charging: new Date().toISOString().slice(0, 19).replace('T', ' ')\n    });\n  }\n  console.log(\"\\u751F\\u6210\\u4E86 \".concat(robots.length, \" \\u6761\\u540E\\u5907\\u673A\\u5668\\u4EBA\\u6570\\u636E\"));\n  return robots;\n}\n\n// 生成后备订单数据的函数\nfunction generateFallbackOrders() {\n  console.log('生成后备订单数据');\n  var orders = [];\n  var statuses = ['charging', 'completed', 'failed'];\n  for (var i = 1; i <= 10; i++) {\n    var status = statuses[Math.floor(Math.random() * statuses.length)];\n    var startTime = new Date(Date.now() - Math.floor(Math.random() * 30 * 24 * 60 * 60 * 1000)).toISOString().slice(0, 19).replace('T', ' ');\n    var order = {\n      id: i,\n      robot_id: Math.floor(Math.random() * 10) + 1,\n      station_id: Math.floor(Math.random() * 10) + 1,\n      start_time: startTime,\n      status: status\n    };\n\n    // 如果状态是已完成，添加结束时间和充电量\n    if (status === 'completed') {\n      var endTime = new Date(new Date(startTime).getTime() + Math.floor(Math.random() * 4 * 60 * 60 * 1000)).toISOString().slice(0, 19).replace('T', ' ');\n      order.end_time = endTime;\n      order.amount = Math.floor(Math.random() * 40) + 10;\n    }\n    orders.push(order);\n  }\n  console.log(\"\\u751F\\u6210\\u4E86 \".concat(orders.length, \" \\u6761\\u540E\\u5907\\u8BA2\\u5355\\u6570\\u636E\"));\n  return orders;\n}\n\n// 生成后备充电站数据的函数\nfunction generateFallbackStations() {\n  console.log('生成后备充电站数据');\n  var stations = [];\n  var statuses = ['idle', 'charging', 'maintenance', 'error'];\n  for (var i = 1; i <= 8; i++) {\n    var status = statuses[Math.floor(Math.random() * statuses.length)];\n    var efficiency = Math.floor(Math.random() * 15) + 80; // 80-95\n\n    stations.push({\n      id: i,\n      name: \"\\u5145\\u7535\\u7AD9-\".concat(i),\n      location: \"\\u4F4D\\u7F6E\".concat(i),\n      status: status,\n      power_rating: Math.floor(Math.random() * 5) + 5,\n      // 5-10\n      efficiency: efficiency\n    });\n  }\n  console.log(\"\\u751F\\u6210\\u4E86 \".concat(stations.length, \" \\u6761\\u540E\\u5907\\u5145\\u7535\\u7AD9\\u6570\\u636E\"));\n  return stations;\n}\nvar api = axios.create({\n  baseURL: '/api',\n  timeout: 5000\n});\n\n// 请求拦截器\napi.interceptors.request.use(function (config) {\n  console.log(\"API\\u8BF7\\u6C42: \".concat(config.method.toUpperCase(), \" \").concat(config.url));\n  var token = localStorage.getItem('token');\n  if (token) {\n    // 确保令牌格式正确\n    if (typeof token === 'string' && token.trim() !== '') {\n      config.headers.Authorization = \"Bearer \".concat(token.trim());\n      // 禁用token缓存，确保每次请求都使用最新的token\n      config.headers['Cache-Control'] = 'no-cache';\n      console.log('已添加认证令牌');\n    } else {\n      console.warn('令牌格式不正确:', token);\n      localStorage.removeItem('token');\n    }\n  } else {\n    console.log('未找到认证令牌');\n  }\n  return config;\n}, function (error) {\n  console.error('请求拦截器错误:', error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(function (response) {\n  console.log(\"API\\u54CD\\u5E94: \".concat(response.config.method.toUpperCase(), \" \").concat(response.config.url), response.data);\n  return response;\n}, function (error) {\n  // 处理认证错误\n  if (error.response && error.response.status === 401) {\n    console.error('认证失败，需要重新登录');\n    // 清除本地存储的认证信息\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    // 如果不是登录页面，可以重定向到登录页\n    if (window.location.pathname !== '/login') {\n      window.location.href = '/login';\n    }\n  }\n  console.error('API错误:', error.response ? error.response.data : error.message);\n  return Promise.reject(error);\n});\n\n// 充电站相关 API\nexport var stationApi = {\n  // 获取所有充电站\n  getAll: function getAll() {\n    console.log('调用API: 获取所有充电站');\n    return new Promise(function (resolve, reject) {\n      api.get('/stations/', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        responseType: 'json'\n      }).then(function (response) {\n        console.log('充电站API响应状态:', response.status);\n        console.log('充电站API响应头:', response.headers);\n        var data = response.data;\n        console.log('原始响应数据类型:', _typeof(data));\n\n        // 处理各种响应类型\n        try {\n          // 1. 如果是字符串，尝试解析为JSON\n          if (typeof data === 'string') {\n            console.log('响应是字符串，尝试解析为JSON');\n            try {\n              // 处理NaN值，将其替换为null\n              var cleanedData = data.replace(/: ?NaN/g, ': null');\n              data = JSON.parse(cleanedData);\n              console.log('解析后的数据类型:', _typeof(data));\n            } catch (e) {\n              console.error('解析字符串为JSON失败:', e);\n            }\n          }\n\n          // 2. 检查是否为null或undefined\n          if (data === null || data === undefined) {\n            console.error('API返回的充电站数据为null或undefined');\n            resolve({\n              data: []\n            });\n            return;\n          }\n\n          // 3. 确保数据是数组\n          if (!Array.isArray(data)) {\n            console.error('API返回的充电站数据不是数组:', _typeof(data));\n\n            // 如果是对象且有data属性是数组，则使用该属性\n            if (data && _typeof(data) === 'object' && Array.isArray(data.data)) {\n              console.log('使用响应对象中的data属性作为数据数组');\n              data = data.data;\n            } else {\n              // 最后的后备方案：使用硬编码的充电站数据\n              console.error('使用硬编码的充电站数据');\n              data = generateFallbackStations();\n            }\n          }\n\n          // 4. 验证数组中每个元素是否为有效的充电站对象\n          data = data.filter(function (item) {\n            var isValid = item && _typeof(item) === 'object' && 'id' in item && 'name' in item && 'location' in item && 'status' in item;\n            if (!isValid) {\n              console.warn('过滤掉无效的充电站数据:', item);\n            }\n            return isValid;\n          });\n          console.log(\"\\u8FC7\\u6EE4\\u540E\\u7684\\u5145\\u7535\\u7AD9\\u6570\\u636E\\u6570\\u91CF: \".concat(data.length));\n\n          // 5. 如果过滤后数组为空，使用后备数据\n          if (data.length === 0) {\n            console.warn('过滤后没有有效的充电站数据，使用后备数据');\n            data = generateFallbackStations();\n          }\n\n          // 返回处理后的数据\n          resolve({\n            data: data\n          });\n        } catch (e) {\n          console.error('处理响应数据时出错:', e);\n          resolve({\n            data: generateFallbackStations()\n          });\n        }\n      })[\"catch\"](function (error) {\n        console.error('获取充电站数据网络请求失败:', error);\n        resolve({\n          data: generateFallbackStations()\n        });\n      });\n    });\n  },\n  // 获取单个充电站\n  getById: function getById(id) {\n    return api.get(\"stations/\".concat(id, \"/\"));\n  },\n  // 更新充电站\n  update: function update(id, data) {\n    console.log('调用API: 更新充电站', id, data);\n    return new Promise(function (resolve, reject) {\n      // 确保数据格式正确\n      var stationData = _objectSpread({}, data);\n\n      // 确保功率值是数字\n      if (stationData.power_rating !== undefined) {\n        try {\n          stationData.power_rating = parseFloat(stationData.power_rating);\n          if (isNaN(stationData.power_rating)) {\n            stationData.power_rating = 0;\n          }\n        } catch (e) {\n          stationData.power_rating = 0;\n        }\n      }\n\n      // 确保效率值是数字\n      if (stationData.efficiency !== undefined) {\n        try {\n          stationData.efficiency = parseFloat(stationData.efficiency);\n          if (isNaN(stationData.efficiency)) {\n            stationData.efficiency = 80;\n          }\n        } catch (e) {\n          stationData.efficiency = 80;\n        }\n      }\n      console.log('格式化后的充电站数据:', stationData);\n      api.put(\"stations/\".concat(id, \"/\"), stationData, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        console.log('更新充电站成功:', response.data);\n        resolve(response);\n      })[\"catch\"](function (error) {\n        console.error('更新充电站失败:', error.response ? error.response.data : error);\n        reject(error);\n      });\n    });\n  },\n  // 添加充电站\n  add: function add(data) {\n    console.log('调用API: 添加充电站', data);\n    return new Promise(function (resolve, reject) {\n      // 确保数据格式正确\n      var stationData = {\n        name: data.name || '',\n        location: data.location || '',\n        power_rating: data.power_rating !== undefined && data.power_rating !== null ? parseFloat(data.power_rating) : 0,\n        status: data.status || 'idle',\n        efficiency: data.efficiency !== undefined && data.efficiency !== null ? parseFloat(data.efficiency) : 80\n      };\n      console.log('格式化后的充电站数据:', stationData);\n      api.post('stations/', stationData, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        console.log('添加充电站成功:', response.data);\n        resolve(response);\n      })[\"catch\"](function (error) {\n        console.error('添加充电站失败:', error.response ? error.response.data : error);\n        // 如果是422错误，提供更详细的错误信息\n        if (error.response && error.response.status === 422) {\n          reject(new Error('数据验证失败: ' + JSON.stringify(error.response.data)));\n        } else {\n          reject(error);\n        }\n      });\n    });\n  },\n  // 删除充电站\n  \"delete\": function _delete(id) {\n    return api[\"delete\"](\"stations/\".concat(id, \"/\"));\n  }\n};\n\n// 机器人相关 API\nexport var robotApi = {\n  // 获取所有机器人\n  getAll: function getAll() {\n    console.log('调用API: 获取所有机器人');\n    return new Promise(function (resolve, reject) {\n      api.get('robots/', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        responseType: 'json'\n      }).then(function (response) {\n        console.log('机器人API响应状态:', response.status);\n        console.log('机器人API响应头:', response.headers);\n        var data = response.data;\n        console.log('原始响应数据类型:', _typeof(data));\n\n        // 处理各种响应类型\n        try {\n          // 1. 如果是字符串，尝试解析为JSON\n          if (typeof data === 'string') {\n            console.log('响应是字符串，尝试解析为JSON');\n            try {\n              // 处理NaN值，将其替换为null\n              var cleanedData = data.replace(/: ?NaN/g, ': null');\n              data = JSON.parse(cleanedData);\n              console.log('解析后的数据类型:', _typeof(data));\n            } catch (e) {\n              console.error('解析字符串为JSON失败:', e);\n            }\n          }\n\n          // 2. 检查是否为null或undefined\n          if (data === null || data === undefined) {\n            console.error('API返回的机器人数据为null或undefined');\n            resolve({\n              data: []\n            });\n            return;\n          }\n\n          // 3. 确保数据是数组\n          if (!Array.isArray(data)) {\n            console.error('API返回的机器人数据不是数组:', _typeof(data));\n\n            // 如果是对象且有data属性是数组，则使用该属性\n            if (data && _typeof(data) === 'object' && Array.isArray(data.data)) {\n              console.log('使用响应对象中的data属性作为数据数组');\n              data = data.data;\n            } else {\n              // 最后的后备方案：使用硬编码的机器人数据\n              console.error('使用硬编码的机器人数据');\n              data = generateFallbackRobots();\n            }\n          }\n\n          // 4. 验证数组中每个元素是否为有效的机器人对象\n          data = data.filter(function (item) {\n            return item && _typeof(item) === 'object' && 'id' in item && 'name' in item && 'battery_level' in item && 'status' in item;\n          });\n          console.log(\"\\u8FC7\\u6EE4\\u540E\\u7684\\u673A\\u5668\\u4EBA\\u6570\\u636E\\u6570\\u91CF: \".concat(data.length));\n\n          // 5. 如果过滤后数组为空，使用后备数据\n          if (data.length === 0) {\n            console.warn('过滤后没有有效的机器人数据，使用后备数据');\n            data = generateFallbackRobots();\n          }\n\n          // 返回处理后的数据\n          resolve({\n            data: data\n          });\n        } catch (e) {\n          console.error('处理响应数据时出错:', e);\n          resolve({\n            data: generateFallbackRobots()\n          });\n        }\n      })[\"catch\"](function (error) {\n        console.error('获取机器人数据网络请求失败:', error);\n        resolve({\n          data: generateFallbackRobots()\n        });\n      });\n    });\n  },\n  // 获取单个机器人\n  getById: function getById(id) {\n    return api.get(\"robots/\".concat(id, \"/\"));\n  },\n  // 更新机器人\n  update: function update(id, data) {\n    return api.put(\"robots/\".concat(id, \"/\"), data);\n  },\n  // 添加机器人\n  add: function add(data) {\n    return api.post('robots/', data);\n  },\n  // 删除机器人\n  \"delete\": function _delete(id) {\n    return api[\"delete\"](\"robots/\".concat(id, \"/\"));\n  }\n};\n\n// 订单相关 API\nexport var orderApi = {\n  // 获取所有订单\n  getAll: function getAll() {\n    console.log('调用API: 获取所有订单');\n    return new Promise(function (resolve, reject) {\n      api.get('orders/', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        responseType: 'json'\n      }).then(function (response) {\n        console.log('订单API响应状态:', response.status);\n        console.log('订单API响应头:', response.headers);\n        var data = response.data;\n        console.log('原始响应数据类型:', _typeof(data));\n\n        // 处理各种响应类型\n        try {\n          // 1. 如果是字符串，尝试解析为JSON\n          if (typeof data === 'string') {\n            console.log('响应是字符串，尝试解析为JSON');\n            try {\n              // 处理NaN值，将其替换为null\n              var cleanedData = data.replace(/: ?NaN/g, ': null');\n              data = JSON.parse(cleanedData);\n              console.log('解析后的数据类型:', _typeof(data));\n            } catch (e) {\n              console.error('解析字符串为JSON失败:', e);\n            }\n          }\n\n          // 2. 检查是否为null或undefined\n          if (data === null || data === undefined) {\n            console.error('API返回的订单数据为null或undefined');\n            resolve({\n              data: []\n            });\n            return;\n          }\n\n          // 3. 确保数据是数组\n          if (!Array.isArray(data)) {\n            console.error('API返回的订单数据不是数组:', _typeof(data));\n\n            // 如果是对象且有data属性是数组，则使用该属性\n            if (data && _typeof(data) === 'object' && Array.isArray(data.data)) {\n              console.log('使用响应对象中的data属性作为数据数组');\n              data = data.data;\n            } else {\n              // 最后的后备方案：使用硬编码的订单数据\n              console.error('使用硬编码的订单数据');\n              data = generateFallbackOrders();\n            }\n          }\n\n          // 4. 验证数组中每个元素是否为有效的订单对象\n          data = data.filter(function (item) {\n            var isValid = item && _typeof(item) === 'object' && 'id' in item && 'robot_id' in item && 'station_id' in item && 'start_time' in item && 'status' in item;\n            if (!isValid) {\n              console.warn('过滤掉无效的订单数据:', item);\n            }\n            return isValid;\n          });\n          console.log(\"\\u8FC7\\u6EE4\\u540E\\u7684\\u8BA2\\u5355\\u6570\\u636E\\u6570\\u91CF: \".concat(data.length));\n\n          // 5. 如果过滤后数组为空，使用后备数据\n          if (data.length === 0) {\n            console.warn('过滤后没有有效的订单数据，使用后备数据');\n            data = generateFallbackOrders();\n          }\n\n          // 返回处理后的数据\n          resolve({\n            data: data\n          });\n        } catch (e) {\n          console.error('处理响应数据时出错:', e);\n          resolve({\n            data: generateFallbackOrders()\n          });\n        }\n      })[\"catch\"](function (error) {\n        console.error('获取订单数据网络请求失败:', error);\n        resolve({\n          data: generateFallbackOrders()\n        });\n      });\n    });\n  },\n  // 获取单个订单\n  getById: function getById(id) {\n    return api.get(\"orders/\".concat(id, \"/\"));\n  },\n  // 创建订单\n  create: function create(data) {\n    return api.post('orders/', data);\n  },\n  // 更新订单状态\n  updateStatus: function updateStatus(id, status) {\n    return api.put(\"orders/\".concat(id, \"/status/\"), {\n      status: status\n    });\n  }\n};\n\n// 系统相关 API\nexport var systemApi = {\n  // 获取系统设置\n  getSettings: function getSettings() {\n    return api.get('system/settings/');\n  },\n  // 更新系统设置\n  updateSettings: function updateSettings(data) {\n    return api.put('system/settings/', data);\n  },\n  // 获取仪表盘数据\n  getDashboardData: function getDashboardData() {\n    console.log('调用API: 获取仪表盘数据');\n    return new Promise(function (resolve, reject) {\n      api.get('/system/dashboard/', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Cache-Control': 'no-cache'\n        },\n        responseType: 'json',\n        timeout: 10000 // 增加超时时间到10秒\n      }).then(function (response) {\n        console.log('仪表盘API响应状态:', response.status);\n        var data = response.data;\n        console.log('仪表盘API响应:', data);\n\n        // 如果响应为字符串，尝试解析\n        if (typeof data === 'string') {\n          try {\n            data = JSON.parse(data);\n          } catch (e) {\n            console.error('解析仪表盘响应失败:', e);\n          }\n        }\n        resolve({\n          data: data\n        });\n      })[\"catch\"](function (error) {\n        console.error('获取仪表盘数据失败:', error.response || error.message || error);\n\n        // 返回带有错误信息的响应，而不是拒绝Promise\n        resolve({\n          data: {\n            stationCount: 0,\n            onlineStations: 0,\n            offlineStations: 0,\n            robotCount: 0,\n            chargingRobots: 0,\n            waitingRobots: 0,\n            todayOrders: 0,\n            orderChangeRate: 0,\n            systemStatus: '错误',\n            systemMessage: \"\\u6570\\u636E\\u52A0\\u8F7D\\u5931\\u8D25: \".concat(error.message || '未知错误')\n          }\n        });\n      });\n    });\n  },\n  // 获取系统告警\n  getAlerts: function getAlerts() {\n    return api.get('system/alerts/');\n  },\n  // 获取系统日志\n  getLogs: function getLogs() {\n    return api.get('system/logs/');\n  },\n  // 获取充电效率记录\n  getEfficiencyLogs: function getEfficiencyLogs() {\n    return api.get('system/efficiency/');\n  }\n};\n\n// 测试API连接\nexport var testApi = {\n  checkData: function checkData() {\n    console.log('调用API: 测试数据加载');\n    return new Promise(function (resolve, reject) {\n      api.get('/auth/test-data/', {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Cache-Control': 'no-cache'\n        },\n        responseType: 'json',\n        timeout: 10000 // 增加超时时间到10秒\n      }).then(function (response) {\n        console.log('测试数据API响应状态:', response.status);\n        console.log('测试数据API响应头:', response.headers);\n        var data = response.data;\n        console.log('测试数据API响应:', data);\n\n        // 如果响应为字符串，尝试解析\n        if (typeof data === 'string') {\n          try {\n            data = JSON.parse(data);\n          } catch (e) {\n            console.error('解析测试数据响应失败:', e);\n          }\n        }\n        resolve({\n          data: data\n        });\n      })[\"catch\"](function (error) {\n        console.error('测试数据加载失败:', error.response || error.message || error);\n\n        // 返回带有错误信息的响应，而不是拒绝Promise\n        resolve({\n          data: {\n            error: error.message || '未知错误',\n            success: false,\n            errorDetails: error.response ? error.response.data : null\n          }\n        });\n      });\n    });\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","generateFallbackRobots","console","log","robots","statuses","i","status","Math","floor","random","length","batteryLevel","push","id","name","concat","toString","padStart","battery_level","last_charging","Date","toISOString","slice","replace","generateFallbackOrders","orders","startTime","now","order","robot_id","station_id","start_time","endTime","getTime","end_time","amount","generateFallbackStations","stations","efficiency","location","power_rating","api","create","baseURL","timeout","interceptors","request","use","config","method","toUpperCase","url","token","localStorage","getItem","trim","headers","Authorization","warn","removeItem","error","Promise","reject","response","data","window","pathname","href","message","stationApi","getAll","resolve","get","responseType","then","_typeof","cleanedData","JSON","parse","e","undefined","Array","isArray","filter","item","isValid","getById","update","stationData","_objectSpread","parseFloat","isNaN","put","add","post","Error","stringify","delete","robotApi","orderApi","updateStatus","systemApi","getSettings","updateSettings","getDashboardData","stationCount","onlineStations","offlineStations","robotCount","chargingRobots","waitingRobots","todayOrders","orderChangeRate","systemStatus","systemMessage","getAlerts","getLogs","getEfficiencyLogs","testApi","checkData","success","errorDetails"],"sources":["D:/software_data/Project/Y0527/CODE_BAK/frontend/src/api/index.js"],"sourcesContent":["import axios from 'axios'\r\n\r\n// 生成后备机器人数据的函数\r\nfunction generateFallbackRobots() {\r\n  console.log('生成后备机器人数据')\r\n  const robots = []\r\n  const statuses = ['idle', 'working', 'charging', 'error']\r\n  \r\n  for (let i = 1; i <= 10; i++) {\r\n    const status = statuses[Math.floor(Math.random() * statuses.length)]\r\n    const batteryLevel = Math.floor(Math.random() * 100)\r\n    \r\n    robots.push({\r\n      id: i,\r\n      name: `机器人-${i.toString().padStart(3, '0')}`,\r\n      battery_level: batteryLevel,\r\n      status: status,\r\n      last_charging: new Date().toISOString().slice(0, 19).replace('T', ' ')\r\n    })\r\n  }\r\n  \r\n  console.log(`生成了 ${robots.length} 条后备机器人数据`)\r\n  return robots\r\n}\r\n\r\n// 生成后备订单数据的函数\r\nfunction generateFallbackOrders() {\r\n  console.log('生成后备订单数据')\r\n  const orders = []\r\n  const statuses = ['charging', 'completed', 'failed']\r\n  \r\n  for (let i = 1; i <= 10; i++) {\r\n    const status = statuses[Math.floor(Math.random() * statuses.length)]\r\n    const startTime = new Date(Date.now() - Math.floor(Math.random() * 30 * 24 * 60 * 60 * 1000))\r\n      .toISOString().slice(0, 19).replace('T', ' ')\r\n    \r\n    const order = {\r\n      id: i,\r\n      robot_id: Math.floor(Math.random() * 10) + 1,\r\n      station_id: Math.floor(Math.random() * 10) + 1,\r\n      start_time: startTime,\r\n      status: status\r\n    }\r\n    \r\n    // 如果状态是已完成，添加结束时间和充电量\r\n    if (status === 'completed') {\r\n      const endTime = new Date(new Date(startTime).getTime() + Math.floor(Math.random() * 4 * 60 * 60 * 1000))\r\n        .toISOString().slice(0, 19).replace('T', ' ')\r\n      order.end_time = endTime\r\n      order.amount = Math.floor(Math.random() * 40) + 10\r\n    }\r\n    \r\n    orders.push(order)\r\n  }\r\n  \r\n  console.log(`生成了 ${orders.length} 条后备订单数据`)\r\n  return orders\r\n}\r\n\r\n// 生成后备充电站数据的函数\r\nfunction generateFallbackStations() {\r\n  console.log('生成后备充电站数据')\r\n  const stations = []\r\n  const statuses = ['idle', 'charging', 'maintenance', 'error']\r\n  \r\n  for (let i = 1; i <= 8; i++) {\r\n    const status = statuses[Math.floor(Math.random() * statuses.length)]\r\n    const efficiency = Math.floor(Math.random() * 15) + 80 // 80-95\r\n    \r\n    stations.push({\r\n      id: i,\r\n      name: `充电站-${i}`,\r\n      location: `位置${i}`,\r\n      status: status,\r\n      power_rating: Math.floor(Math.random() * 5) + 5, // 5-10\r\n      efficiency: efficiency\r\n    })\r\n  }\r\n  \r\n  console.log(`生成了 ${stations.length} 条后备充电站数据`)\r\n  return stations\r\n}\r\n\r\nconst api = axios.create({\r\n  baseURL: '/api',\r\n  timeout: 5000\r\n})\r\n\r\n// 请求拦截器\r\napi.interceptors.request.use(\r\n  config => {\r\n    console.log(`API请求: ${config.method.toUpperCase()} ${config.url}`)\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n      // 确保令牌格式正确\r\n      if (typeof token === 'string' && token.trim() !== '') {\r\n        config.headers.Authorization = `Bearer ${token.trim()}`\r\n        // 禁用token缓存，确保每次请求都使用最新的token\r\n        config.headers['Cache-Control'] = 'no-cache'\r\n        console.log('已添加认证令牌')\r\n      } else {\r\n        console.warn('令牌格式不正确:', token)\r\n        localStorage.removeItem('token')\r\n      }\r\n    } else {\r\n      console.log('未找到认证令牌')\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    console.error('请求拦截器错误:', error)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 响应拦截器\r\napi.interceptors.response.use(\r\n  response => {\r\n    console.log(`API响应: ${response.config.method.toUpperCase()} ${response.config.url}`, response.data)\r\n    return response\r\n  },\r\n  error => {\r\n    // 处理认证错误\r\n    if (error.response && error.response.status === 401) {\r\n      console.error('认证失败，需要重新登录')\r\n      // 清除本地存储的认证信息\r\n      localStorage.removeItem('token')\r\n      localStorage.removeItem('user')\r\n      // 如果不是登录页面，可以重定向到登录页\r\n      if (window.location.pathname !== '/login') {\r\n        window.location.href = '/login'\r\n      }\r\n    }\r\n    \r\n    console.error('API错误:', error.response ? error.response.data : error.message)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 充电站相关 API\r\nexport const stationApi = {\r\n  // 获取所有充电站\r\n  getAll() {\r\n    console.log('调用API: 获取所有充电站')\r\n    return new Promise((resolve, reject) => {\r\n      api.get('/stations/', {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        responseType: 'json'\r\n      })\r\n        .then(response => {\r\n          console.log('充电站API响应状态:', response.status)\r\n          console.log('充电站API响应头:', response.headers)\r\n          \r\n          let data = response.data\r\n          console.log('原始响应数据类型:', typeof data)\r\n          \r\n          // 处理各种响应类型\r\n          try {\r\n            // 1. 如果是字符串，尝试解析为JSON\r\n            if (typeof data === 'string') {\r\n              console.log('响应是字符串，尝试解析为JSON')\r\n              try {\r\n                // 处理NaN值，将其替换为null\r\n                const cleanedData = data.replace(/: ?NaN/g, ': null')\r\n                data = JSON.parse(cleanedData)\r\n                console.log('解析后的数据类型:', typeof data)\r\n              } catch (e) {\r\n                console.error('解析字符串为JSON失败:', e)\r\n              }\r\n            }\r\n            \r\n            // 2. 检查是否为null或undefined\r\n            if (data === null || data === undefined) {\r\n              console.error('API返回的充电站数据为null或undefined')\r\n              resolve({ data: [] })\r\n              return\r\n            }\r\n            \r\n            // 3. 确保数据是数组\r\n            if (!Array.isArray(data)) {\r\n              console.error('API返回的充电站数据不是数组:', typeof data)\r\n              \r\n              // 如果是对象且有data属性是数组，则使用该属性\r\n              if (data && typeof data === 'object' && Array.isArray(data.data)) {\r\n                console.log('使用响应对象中的data属性作为数据数组')\r\n                data = data.data\r\n              } else {\r\n                // 最后的后备方案：使用硬编码的充电站数据\r\n                console.error('使用硬编码的充电站数据')\r\n                data = generateFallbackStations()\r\n              }\r\n            }\r\n            \r\n            // 4. 验证数组中每个元素是否为有效的充电站对象\r\n            data = data.filter(item => {\r\n              const isValid = item && \r\n                     typeof item === 'object' && \r\n                     'id' in item && \r\n                     'name' in item && \r\n                     'location' in item && \r\n                     'status' in item\r\n              \r\n              if (!isValid) {\r\n                console.warn('过滤掉无效的充电站数据:', item)\r\n              }\r\n              return isValid\r\n            })\r\n            \r\n            console.log(`过滤后的充电站数据数量: ${data.length}`)\r\n            \r\n            // 5. 如果过滤后数组为空，使用后备数据\r\n            if (data.length === 0) {\r\n              console.warn('过滤后没有有效的充电站数据，使用后备数据')\r\n              data = generateFallbackStations()\r\n            }\r\n            \r\n            // 返回处理后的数据\r\n            resolve({ data })\r\n          } catch (e) {\r\n            console.error('处理响应数据时出错:', e)\r\n            resolve({ data: generateFallbackStations() })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('获取充电站数据网络请求失败:', error)\r\n          resolve({ data: generateFallbackStations() })\r\n        })\r\n    })\r\n  },\r\n  // 获取单个充电站\r\n  getById(id) {\r\n    return api.get(`stations/${id}/`)\r\n  },\r\n  // 更新充电站\r\n  update(id, data) {\r\n    console.log('调用API: 更新充电站', id, data)\r\n    return new Promise((resolve, reject) => {\r\n      // 确保数据格式正确\r\n      const stationData = { ...data }\r\n      \r\n      // 确保功率值是数字\r\n      if (stationData.power_rating !== undefined) {\r\n        try {\r\n          stationData.power_rating = parseFloat(stationData.power_rating)\r\n          if (isNaN(stationData.power_rating)) {\r\n            stationData.power_rating = 0\r\n          }\r\n        } catch (e) {\r\n          stationData.power_rating = 0\r\n        }\r\n      }\r\n      \r\n      // 确保效率值是数字\r\n      if (stationData.efficiency !== undefined) {\r\n        try {\r\n          stationData.efficiency = parseFloat(stationData.efficiency)\r\n          if (isNaN(stationData.efficiency)) {\r\n            stationData.efficiency = 80\r\n          }\r\n        } catch (e) {\r\n          stationData.efficiency = 80\r\n        }\r\n      }\r\n      \r\n      console.log('格式化后的充电站数据:', stationData)\r\n      \r\n      api.put(`stations/${id}/`, stationData, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n        .then(response => {\r\n          console.log('更新充电站成功:', response.data)\r\n          resolve(response)\r\n        })\r\n        .catch(error => {\r\n          console.error('更新充电站失败:', error.response ? error.response.data : error)\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n  // 添加充电站\r\n  add(data) {\r\n    console.log('调用API: 添加充电站', data)\r\n    return new Promise((resolve, reject) => {\r\n      // 确保数据格式正确\r\n      const stationData = {\r\n        name: data.name || '',\r\n        location: data.location || '',\r\n        power_rating: data.power_rating !== undefined && data.power_rating !== null ? \r\n          parseFloat(data.power_rating) : 0,\r\n        status: data.status || 'idle',\r\n        efficiency: data.efficiency !== undefined && data.efficiency !== null ? \r\n          parseFloat(data.efficiency) : 80\r\n      }\r\n      \r\n      console.log('格式化后的充电站数据:', stationData)\r\n      \r\n      api.post('stations/', stationData, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        }\r\n      })\r\n        .then(response => {\r\n          console.log('添加充电站成功:', response.data)\r\n          resolve(response)\r\n        })\r\n        .catch(error => {\r\n          console.error('添加充电站失败:', error.response ? error.response.data : error)\r\n          // 如果是422错误，提供更详细的错误信息\r\n          if (error.response && error.response.status === 422) {\r\n            reject(new Error('数据验证失败: ' + JSON.stringify(error.response.data)))\r\n          } else {\r\n            reject(error)\r\n          }\r\n        })\r\n    })\r\n  },\r\n  // 删除充电站\r\n  delete(id) {\r\n    return api.delete(`stations/${id}/`)\r\n  }\r\n}\r\n\r\n// 机器人相关 API\r\nexport const robotApi = {\r\n  // 获取所有机器人\r\n  getAll() {\r\n    console.log('调用API: 获取所有机器人')\r\n    return new Promise((resolve, reject) => {\r\n      api.get('robots/', {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        responseType: 'json'\r\n      })\r\n        .then(response => {\r\n          console.log('机器人API响应状态:', response.status)\r\n          console.log('机器人API响应头:', response.headers)\r\n          \r\n          let data = response.data\r\n          console.log('原始响应数据类型:', typeof data)\r\n          \r\n          // 处理各种响应类型\r\n          try {\r\n            // 1. 如果是字符串，尝试解析为JSON\r\n            if (typeof data === 'string') {\r\n              console.log('响应是字符串，尝试解析为JSON')\r\n              try {\r\n                // 处理NaN值，将其替换为null\r\n                const cleanedData = data.replace(/: ?NaN/g, ': null')\r\n                data = JSON.parse(cleanedData)\r\n                console.log('解析后的数据类型:', typeof data)\r\n              } catch (e) {\r\n                console.error('解析字符串为JSON失败:', e)\r\n              }\r\n            }\r\n            \r\n            // 2. 检查是否为null或undefined\r\n            if (data === null || data === undefined) {\r\n              console.error('API返回的机器人数据为null或undefined')\r\n              resolve({ data: [] })\r\n              return\r\n            }\r\n            \r\n            // 3. 确保数据是数组\r\n            if (!Array.isArray(data)) {\r\n              console.error('API返回的机器人数据不是数组:', typeof data)\r\n              \r\n              // 如果是对象且有data属性是数组，则使用该属性\r\n              if (data && typeof data === 'object' && Array.isArray(data.data)) {\r\n                console.log('使用响应对象中的data属性作为数据数组')\r\n                data = data.data\r\n              } else {\r\n                // 最后的后备方案：使用硬编码的机器人数据\r\n                console.error('使用硬编码的机器人数据')\r\n                data = generateFallbackRobots()\r\n              }\r\n            }\r\n            \r\n            // 4. 验证数组中每个元素是否为有效的机器人对象\r\n            data = data.filter(item => {\r\n              return item && \r\n                     typeof item === 'object' && \r\n                     'id' in item && \r\n                     'name' in item && \r\n                     'battery_level' in item && \r\n                     'status' in item\r\n            })\r\n            \r\n            console.log(`过滤后的机器人数据数量: ${data.length}`)\r\n            \r\n            // 5. 如果过滤后数组为空，使用后备数据\r\n            if (data.length === 0) {\r\n              console.warn('过滤后没有有效的机器人数据，使用后备数据')\r\n              data = generateFallbackRobots()\r\n            }\r\n            \r\n            // 返回处理后的数据\r\n            resolve({ data })\r\n          } catch (e) {\r\n            console.error('处理响应数据时出错:', e)\r\n            resolve({ data: generateFallbackRobots() })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('获取机器人数据网络请求失败:', error)\r\n          resolve({ data: generateFallbackRobots() })\r\n        })\r\n    })\r\n  },\r\n  // 获取单个机器人\r\n  getById(id) {\r\n    return api.get(`robots/${id}/`)\r\n  },\r\n  // 更新机器人\r\n  update(id, data) {\r\n    return api.put(`robots/${id}/`, data)\r\n  },\r\n  // 添加机器人\r\n  add(data) {\r\n    return api.post('robots/', data)\r\n  },\r\n  // 删除机器人\r\n  delete(id) {\r\n    return api.delete(`robots/${id}/`)\r\n  }\r\n}\r\n\r\n// 订单相关 API\r\nexport const orderApi = {\r\n  // 获取所有订单\r\n  getAll() {\r\n    console.log('调用API: 获取所有订单')\r\n    return new Promise((resolve, reject) => {\r\n      api.get('orders/', {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        responseType: 'json'\r\n      })\r\n        .then(response => {\r\n          console.log('订单API响应状态:', response.status)\r\n          console.log('订单API响应头:', response.headers)\r\n          \r\n          let data = response.data\r\n          console.log('原始响应数据类型:', typeof data)\r\n          \r\n          // 处理各种响应类型\r\n          try {\r\n            // 1. 如果是字符串，尝试解析为JSON\r\n            if (typeof data === 'string') {\r\n              console.log('响应是字符串，尝试解析为JSON')\r\n              try {\r\n                // 处理NaN值，将其替换为null\r\n                const cleanedData = data.replace(/: ?NaN/g, ': null')\r\n                data = JSON.parse(cleanedData)\r\n                console.log('解析后的数据类型:', typeof data)\r\n              } catch (e) {\r\n                console.error('解析字符串为JSON失败:', e)\r\n              }\r\n            }\r\n            \r\n            // 2. 检查是否为null或undefined\r\n            if (data === null || data === undefined) {\r\n              console.error('API返回的订单数据为null或undefined')\r\n              resolve({ data: [] })\r\n              return\r\n            }\r\n            \r\n            // 3. 确保数据是数组\r\n            if (!Array.isArray(data)) {\r\n              console.error('API返回的订单数据不是数组:', typeof data)\r\n              \r\n              // 如果是对象且有data属性是数组，则使用该属性\r\n              if (data && typeof data === 'object' && Array.isArray(data.data)) {\r\n                console.log('使用响应对象中的data属性作为数据数组')\r\n                data = data.data\r\n              } else {\r\n                // 最后的后备方案：使用硬编码的订单数据\r\n                console.error('使用硬编码的订单数据')\r\n                data = generateFallbackOrders()\r\n              }\r\n            }\r\n            \r\n            // 4. 验证数组中每个元素是否为有效的订单对象\r\n            data = data.filter(item => {\r\n              const isValid = item && \r\n                     typeof item === 'object' && \r\n                     'id' in item && \r\n                     'robot_id' in item && \r\n                     'station_id' in item && \r\n                     'start_time' in item && \r\n                     'status' in item\r\n              \r\n              if (!isValid) {\r\n                console.warn('过滤掉无效的订单数据:', item)\r\n              }\r\n              return isValid\r\n            })\r\n            \r\n            console.log(`过滤后的订单数据数量: ${data.length}`)\r\n            \r\n            // 5. 如果过滤后数组为空，使用后备数据\r\n            if (data.length === 0) {\r\n              console.warn('过滤后没有有效的订单数据，使用后备数据')\r\n              data = generateFallbackOrders()\r\n            }\r\n            \r\n            // 返回处理后的数据\r\n            resolve({ data })\r\n          } catch (e) {\r\n            console.error('处理响应数据时出错:', e)\r\n            resolve({ data: generateFallbackOrders() })\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('获取订单数据网络请求失败:', error)\r\n          resolve({ data: generateFallbackOrders() })\r\n        })\r\n    })\r\n  },\r\n  // 获取单个订单\r\n  getById(id) {\r\n    return api.get(`orders/${id}/`)\r\n  },\r\n  // 创建订单\r\n  create(data) {\r\n    return api.post('orders/', data)\r\n  },\r\n  // 更新订单状态\r\n  updateStatus(id, status) {\r\n    return api.put(`orders/${id}/status/`, { status })\r\n  }\r\n}\r\n\r\n// 系统相关 API\r\nexport const systemApi = {\r\n  // 获取系统设置\r\n  getSettings() {\r\n    return api.get('system/settings/')\r\n  },\r\n  // 更新系统设置\r\n  updateSettings(data) {\r\n    return api.put('system/settings/', data)\r\n  },\r\n  // 获取仪表盘数据\r\n  getDashboardData() {\r\n    console.log('调用API: 获取仪表盘数据')\r\n    return new Promise((resolve, reject) => {\r\n      api.get('/system/dashboard/', {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Cache-Control': 'no-cache'\r\n        },\r\n        responseType: 'json',\r\n        timeout: 10000 // 增加超时时间到10秒\r\n      })\r\n        .then(response => {\r\n          console.log('仪表盘API响应状态:', response.status)\r\n          \r\n          let data = response.data\r\n          console.log('仪表盘API响应:', data)\r\n          \r\n          // 如果响应为字符串，尝试解析\r\n          if (typeof data === 'string') {\r\n            try {\r\n              data = JSON.parse(data)\r\n            } catch (e) {\r\n              console.error('解析仪表盘响应失败:', e)\r\n            }\r\n          }\r\n          \r\n          resolve({ data })\r\n        })\r\n        .catch(error => {\r\n          console.error('获取仪表盘数据失败:', error.response || error.message || error)\r\n          \r\n          // 返回带有错误信息的响应，而不是拒绝Promise\r\n          resolve({\r\n            data: {\r\n              stationCount: 0,\r\n              onlineStations: 0,\r\n              offlineStations: 0,\r\n              robotCount: 0,\r\n              chargingRobots: 0,\r\n              waitingRobots: 0,\r\n              todayOrders: 0,\r\n              orderChangeRate: 0,\r\n              systemStatus: '错误',\r\n              systemMessage: `数据加载失败: ${error.message || '未知错误'}`\r\n            }\r\n          })\r\n        })\r\n    })\r\n  },\r\n  // 获取系统告警\r\n  getAlerts() {\r\n    return api.get('system/alerts/')\r\n  },\r\n  // 获取系统日志\r\n  getLogs() {\r\n    return api.get('system/logs/')\r\n  },\r\n  // 获取充电效率记录\r\n  getEfficiencyLogs() {\r\n    return api.get('system/efficiency/')\r\n  }\r\n}\r\n\r\n// 测试API连接\r\nexport const testApi = {\r\n  checkData() {\r\n    console.log('调用API: 测试数据加载')\r\n    return new Promise((resolve, reject) => {\r\n      api.get('/auth/test-data/', {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Cache-Control': 'no-cache'\r\n        },\r\n        responseType: 'json',\r\n        timeout: 10000 // 增加超时时间到10秒\r\n      })\r\n        .then(response => {\r\n          console.log('测试数据API响应状态:', response.status)\r\n          console.log('测试数据API响应头:', response.headers)\r\n          \r\n          let data = response.data\r\n          console.log('测试数据API响应:', data)\r\n          \r\n          // 如果响应为字符串，尝试解析\r\n          if (typeof data === 'string') {\r\n            try {\r\n              data = JSON.parse(data)\r\n            } catch (e) {\r\n              console.error('解析测试数据响应失败:', e)\r\n            }\r\n          }\r\n          \r\n          resolve({ data })\r\n        })\r\n        .catch(error => {\r\n          console.error('测试数据加载失败:', error.response || error.message || error)\r\n          \r\n          // 返回带有错误信息的响应，而不是拒绝Promise\r\n          resolve({\r\n            data: {\r\n              error: error.message || '未知错误',\r\n              success: false,\r\n              errorDetails: error.response ? error.response.data : null\r\n            }\r\n          })\r\n        })\r\n    })\r\n  }\r\n}\r\n\r\nexport default api "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}