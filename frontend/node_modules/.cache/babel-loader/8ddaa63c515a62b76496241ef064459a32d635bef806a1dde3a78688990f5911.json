{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"stations-container\"\n};\nvar _hoisted_2 = {\n  \"class\": \"toolbar\"\n};\nvar _hoisted_3 = {\n  \"class\": \"dialog-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_el_button = _resolveComponent(\"el-button\");\n  var _component_el_table_column = _resolveComponent(\"el-table-column\");\n  var _component_el_tag = _resolveComponent(\"el-tag\");\n  var _component_el_progress = _resolveComponent(\"el-progress\");\n  var _component_el_table = _resolveComponent(\"el-table\");\n  var _component_el_card = _resolveComponent(\"el-card\");\n  var _component_el_input = _resolveComponent(\"el-input\");\n  var _component_el_form_item = _resolveComponent(\"el-form-item\");\n  var _component_el_input_number = _resolveComponent(\"el-input-number\");\n  var _component_el_form = _resolveComponent(\"el-form\");\n  var _component_el_dialog = _resolveComponent(\"el-dialog\");\n  var _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[10] || (_cache[10] = _createElementVNode(\"h2\", null, \"充电站管理\", -1 /* HOISTED */)), _createVNode(_component_el_card, {\n    \"class\": \"box-card\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.showAddDialog\n      }, {\n        \"default\": _withCtx(function () {\n          return _cache[5] || (_cache[5] = [_createTextVNode(\"添加充电站\")]);\n        }),\n        _: 1 /* STABLE */,\n        __: [5]\n      }, 8 /* PROPS */, [\"onClick\"])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n        data: $data.stations,\n        style: {\n          \"width\": \"100%\"\n        }\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_el_table_column, {\n            prop: \"id\",\n            label: \"充电站ID\",\n            width: \"180\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"name\",\n            label: \"名称\",\n            width: \"180\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"location\",\n            label: \"位置\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"status\",\n            label: \"状态\"\n          }, {\n            \"default\": _withCtx(function (scope) {\n              return [_createVNode(_component_el_tag, {\n                type: $options.getStatusType(scope.row.status)\n              }, {\n                \"default\": _withCtx(function () {\n                  return [_createTextVNode(_toDisplayString($options.getStatusText(scope.row.status)), 1 /* TEXT */)];\n                }),\n                _: 2 /* DYNAMIC */\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            prop: \"power_output\",\n            label: \"输出功率\"\n          }), _createVNode(_component_el_table_column, {\n            prop: \"efficiency\",\n            label: \"充电效率\"\n          }, {\n            \"default\": _withCtx(function (scope) {\n              return [_createVNode(_component_el_progress, {\n                percentage: scope.row.efficiency\n              }, null, 8 /* PROPS */, [\"percentage\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            width: \"200\"\n          }, {\n            \"default\": _withCtx(function (scope) {\n              return [_createVNode(_component_el_button, {\n                size: \"small\",\n                onClick: function onClick($event) {\n                  return $options.handleEdit(scope.row);\n                }\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[6] || (_cache[6] = [_createTextVNode(\"编辑\")]);\n                }),\n                _: 2 /* DYNAMIC */,\n                __: [6]\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n                size: \"small\",\n                type: \"danger\",\n                onClick: function onClick($event) {\n                  return $options.handleDelete(scope.row);\n                }\n              }, {\n                \"default\": _withCtx(function () {\n                  return _cache[7] || (_cache[7] = [_createTextVNode(\"删除\")]);\n                }),\n                _: 2 /* DYNAMIC */,\n                __: [7]\n              }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $data.loading]])];\n    }),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 添加/编辑对话框 \"), _createVNode(_component_el_dialog, {\n    title: $data.dialogTitle,\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n      return $data.dialogVisible = $event;\n    })\n  }, {\n    footer: _withCtx(function () {\n      return [_createElementVNode(\"span\", _hoisted_3, [_createVNode(_component_el_button, {\n        onClick: _cache[3] || (_cache[3] = function ($event) {\n          return $data.dialogVisible = false;\n        })\n      }, {\n        \"default\": _withCtx(function () {\n          return _cache[8] || (_cache[8] = [_createTextVNode(\"取消\")]);\n        }),\n        _: 1 /* STABLE */,\n        __: [8]\n      }), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $options.handleSave\n      }, {\n        \"default\": _withCtx(function () {\n          return _cache[9] || (_cache[9] = [_createTextVNode(\"确定\")]);\n        }),\n        _: 1 /* STABLE */,\n        __: [9]\n      }, 8 /* PROPS */, [\"onClick\"])])];\n    }),\n    \"default\": _withCtx(function () {\n      return [_createVNode(_component_el_form, {\n        model: $data.stationForm,\n        \"label-width\": \"120px\"\n      }, {\n        \"default\": _withCtx(function () {\n          return [_createVNode(_component_el_form_item, {\n            label: \"充电站名称\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input, {\n                modelValue: $data.stationForm.name,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n                  return $data.stationForm.name = $event;\n                })\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"位置\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input, {\n                modelValue: $data.stationForm.location,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n                  return $data.stationForm.location = $event;\n                })\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"输出功率\"\n          }, {\n            \"default\": _withCtx(function () {\n              return [_createVNode(_component_el_input_number, {\n                modelValue: $data.stationForm.power_output,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n                  return $data.stationForm.power_output = $event;\n                }),\n                min: 0\n              }, null, 8 /* PROPS */, [\"modelValue\"])];\n            }),\n            _: 1 /* STABLE */\n          })];\n        }),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model\"])];\n    }),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"title\", \"modelValue\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","_withCtx","_hoisted_2","_component_el_button","type","onClick","$options","showAddDialog","_cache","_createTextVNode","_","__","_createBlock","_component_el_table","data","$data","stations","style","_component_el_table_column","prop","label","width","scope","_component_el_tag","getStatusType","row","status","_toDisplayString","getStatusText","_component_el_progress","percentage","efficiency","size","$event","handleEdit","handleDelete","loading","_createCommentVNode","_component_el_dialog","title","dialogTitle","modelValue","dialogVisible","footer","_hoisted_3","handleSave","_component_el_form","model","stationForm","_component_el_form_item","_component_el_input","name","location","_component_el_input_number","power_output","min"],"sources":["C:\\Users\\Lenovo\\Desktop\\充电桩\\frontend\\src\\views\\Stations.vue"],"sourcesContent":["<template>\r\n  <div class=\"stations-container\">\r\n    <h2>充电站管理</h2>\r\n    <el-card class=\"box-card\">\r\n      <div class=\"toolbar\">\r\n        <el-button type=\"primary\" @click=\"showAddDialog\">添加充电站</el-button>\r\n      </div>\r\n      <el-table :data=\"stations\" style=\"width: 100%\" v-loading=\"loading\">\r\n        <el-table-column prop=\"id\" label=\"充电站ID\" width=\"180\" />\r\n        <el-table-column prop=\"name\" label=\"名称\" width=\"180\" />\r\n        <el-table-column prop=\"location\" label=\"位置\" />\r\n        <el-table-column prop=\"status\" label=\"状态\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"getStatusType(scope.row.status)\">\r\n              {{ getStatusText(scope.row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"power_output\" label=\"输出功率\" />\r\n        <el-table-column prop=\"efficiency\" label=\"充电效率\">\r\n          <template #default=\"scope\">\r\n            <el-progress :percentage=\"scope.row.efficiency\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"200\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 添加/编辑对话框 -->\r\n    <el-dialog :title=\"dialogTitle\" v-model=\"dialogVisible\">\r\n      <el-form :model=\"stationForm\" label-width=\"120px\">\r\n        <el-form-item label=\"充电站名称\">\r\n          <el-input v-model=\"stationForm.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"位置\">\r\n          <el-input v-model=\"stationForm.location\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"输出功率\">\r\n          <el-input-number v-model=\"stationForm.power_output\" :min=\"0\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">确定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { stationApi } from '@/api'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'Stations',\r\n  data() {\r\n    return {\r\n      stations: [],\r\n      loading: false,\r\n      dialogVisible: false,\r\n      dialogTitle: '添加充电站',\r\n      stationForm: {\r\n        name: '',\r\n        location: '',\r\n        power_output: 0\r\n      },\r\n      isEdit: false,\r\n      currentId: null\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchStations()\r\n  },\r\n  methods: {\r\n    async fetchStations() {\r\n      try {\r\n        this.loading = true\r\n        const response = await stationApi.getAll()\r\n        this.stations = response.data\r\n      } catch (error) {\r\n        ElMessage.error('获取充电站列表失败')\r\n        console.error(error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    getStatusType(status) {\r\n      const types = {\r\n        'idle': 'info',\r\n        'charging': 'primary',\r\n        'maintenance': 'warning',\r\n        'error': 'danger'\r\n      }\r\n      return types[status] || 'info'\r\n    },\r\n    getStatusText(status) {\r\n      const texts = {\r\n        'idle': '空闲',\r\n        'charging': '充电中',\r\n        'maintenance': '维护中',\r\n        'error': '故障'\r\n      }\r\n      return texts[status] || status\r\n    },\r\n    showAddDialog() {\r\n      this.dialogTitle = '添加充电站'\r\n      this.isEdit = false\r\n      this.stationForm = {\r\n        name: '',\r\n        location: '',\r\n        power_output: 0\r\n      }\r\n      this.dialogVisible = true\r\n    },\r\n    handleEdit(row) {\r\n      this.dialogTitle = '编辑充电站'\r\n      this.isEdit = true\r\n      this.currentId = row.id\r\n      this.stationForm = { ...row }\r\n      this.dialogVisible = true\r\n    },\r\n    async handleDelete(row) {\r\n      try {\r\n        await ElMessageBox.confirm('确定要删除这个充电站吗？', '提示', {\r\n          type: 'warning'\r\n        })\r\n        await stationApi.delete(row.id)\r\n        ElMessage.success('删除成功')\r\n        this.fetchStations()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败')\r\n          console.error(error)\r\n        }\r\n      }\r\n    },\r\n    async handleSave() {\r\n      try {\r\n        if (this.isEdit) {\r\n          await stationApi.update(this.currentId, this.stationForm)\r\n          ElMessage.success('更新成功')\r\n        } else {\r\n          await stationApi.add(this.stationForm)\r\n          ElMessage.success('添加成功')\r\n        }\r\n        this.dialogVisible = false\r\n        this.fetchStations()\r\n      } catch (error) {\r\n        ElMessage.error(this.isEdit ? '更新失败' : '添加失败')\r\n        console.error(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stations-container {\r\n  padding: 20px;\r\n}\r\n.toolbar {\r\n  margin-bottom: 20px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}