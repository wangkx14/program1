{"ast":null,"code":"import _objectSpread from \"D:/software_data/Project/Y0527/CODE/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"D:/software_data/Project/Y0527/CODE/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/software_data/Project/Y0527/CODE/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { stationApi } from '@/api';\nimport { ElMessage, ElMessageBox } from 'element-plus';\nexport default {\n  name: 'Stations',\n  data: function data() {\n    return {\n      stations: [],\n      loading: false,\n      dialogVisible: false,\n      dialogTitle: '添加充电站',\n      stationForm: {\n        name: '',\n        location: '',\n        power_output: 0\n      },\n      isEdit: false,\n      currentId: null\n    };\n  },\n  created: function created() {\n    this.fetchStations();\n  },\n  methods: {\n    fetchStations: function fetchStations() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _this.loading = true;\n              _context.next = 4;\n              return stationApi.getAll();\n            case 4:\n              response = _context.sent;\n              _this.stations = response.data;\n              _context.next = 12;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              ElMessage.error('获取充电站列表失败');\n              console.error(_context.t0);\n            case 12:\n              _context.prev = 12;\n              _this.loading = false;\n              return _context.finish(12);\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8, 12, 15]]);\n      }))();\n    },\n    getStatusType: function getStatusType(status) {\n      var types = {\n        'idle': 'info',\n        'charging': 'primary',\n        'maintenance': 'warning',\n        'error': 'danger'\n      };\n      return types[status] || 'info';\n    },\n    getStatusText: function getStatusText(status) {\n      var texts = {\n        'idle': '空闲',\n        'charging': '充电中',\n        'maintenance': '维护中',\n        'error': '故障'\n      };\n      return texts[status] || status;\n    },\n    showAddDialog: function showAddDialog() {\n      this.dialogTitle = '添加充电站';\n      this.isEdit = false;\n      this.stationForm = {\n        name: '',\n        location: '',\n        power_output: 0\n      };\n      this.dialogVisible = true;\n    },\n    handleEdit: function handleEdit(row) {\n      this.dialogTitle = '编辑充电站';\n      this.isEdit = true;\n      this.currentId = row.id;\n      this.stationForm = _objectSpread({}, row);\n      this.dialogVisible = true;\n    },\n    handleDelete: function handleDelete(row) {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return ElMessageBox.confirm('确定要删除这个充电站吗？', '提示', {\n                type: 'warning'\n              });\n            case 3:\n              _context2.next = 5;\n              return stationApi[\"delete\"](row.id);\n            case 5:\n              ElMessage.success('删除成功');\n              _this2.fetchStations();\n              _context2.next = 12;\n              break;\n            case 9:\n              _context2.prev = 9;\n              _context2.t0 = _context2[\"catch\"](0);\n              if (_context2.t0 !== 'cancel') {\n                ElMessage.error('删除失败');\n                console.error(_context2.t0);\n              }\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    handleSave: function handleSave() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              if (!_this3.isEdit) {\n                _context3.next = 7;\n                break;\n              }\n              _context3.next = 4;\n              return stationApi.update(_this3.currentId, _this3.stationForm);\n            case 4:\n              ElMessage.success('更新成功');\n              _context3.next = 10;\n              break;\n            case 7:\n              _context3.next = 9;\n              return stationApi.add(_this3.stationForm);\n            case 9:\n              ElMessage.success('添加成功');\n            case 10:\n              _this3.dialogVisible = false;\n              _this3.fetchStations();\n              _context3.next = 18;\n              break;\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](0);\n              ElMessage.error(_this3.isEdit ? '更新失败' : '添加失败');\n              console.error(_context3.t0);\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 14]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["stationApi","ElMessage","ElMessageBox","name","data","stations","loading","dialogVisible","dialogTitle","stationForm","location","power_output","isEdit","currentId","created","fetchStations","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","getAll","sent","t0","error","console","finish","stop","getStatusType","status","types","getStatusText","texts","showAddDialog","handleEdit","row","id","_objectSpread","handleDelete","_this2","_callee2","_callee2$","_context2","confirm","type","success","handleSave","_this3","_callee3","_callee3$","_context3","update","add"],"sources":["D:\\software_data\\Project\\Y0527\\CODE\\frontend\\src\\views\\Stations.vue"],"sourcesContent":["<template>\r\n  <div class=\"stations-container\">\r\n    <h2>充电站管理</h2>\r\n    <el-card class=\"box-card\">\r\n      <div class=\"toolbar\">\r\n        <el-button type=\"primary\" @click=\"showAddDialog\">添加充电站</el-button>\r\n      </div>\r\n      <el-table :data=\"stations\" style=\"width: 100%\" v-loading=\"loading\">\r\n        <el-table-column prop=\"id\" label=\"充电站ID\" width=\"180\" />\r\n        <el-table-column prop=\"name\" label=\"名称\" width=\"180\" />\r\n        <el-table-column prop=\"location\" label=\"位置\" />\r\n        <el-table-column prop=\"status\" label=\"状态\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"getStatusType(scope.row.status)\">\r\n              {{ getStatusText(scope.row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"power_output\" label=\"输出功率\" />\r\n        <el-table-column prop=\"efficiency\" label=\"充电效率\">\r\n          <template #default=\"scope\">\r\n            <el-progress :percentage=\"scope.row.efficiency\" />\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"200\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 添加/编辑对话框 -->\r\n    <el-dialog :title=\"dialogTitle\" v-model=\"dialogVisible\">\r\n      <el-form :model=\"stationForm\" label-width=\"120px\">\r\n        <el-form-item label=\"充电站名称\">\r\n          <el-input v-model=\"stationForm.name\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"位置\">\r\n          <el-input v-model=\"stationForm.location\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"输出功率\">\r\n          <el-input-number v-model=\"stationForm.power_output\" :min=\"0\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave\">确定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { stationApi } from '@/api'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'Stations',\r\n  data() {\r\n    return {\r\n      stations: [],\r\n      loading: false,\r\n      dialogVisible: false,\r\n      dialogTitle: '添加充电站',\r\n      stationForm: {\r\n        name: '',\r\n        location: '',\r\n        power_output: 0\r\n      },\r\n      isEdit: false,\r\n      currentId: null\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchStations()\r\n  },\r\n  methods: {\r\n    async fetchStations() {\r\n      try {\r\n        this.loading = true\r\n        const response = await stationApi.getAll()\r\n        this.stations = response.data\r\n      } catch (error) {\r\n        ElMessage.error('获取充电站列表失败')\r\n        console.error(error)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    getStatusType(status) {\r\n      const types = {\r\n        'idle': 'info',\r\n        'charging': 'primary',\r\n        'maintenance': 'warning',\r\n        'error': 'danger'\r\n      }\r\n      return types[status] || 'info'\r\n    },\r\n    getStatusText(status) {\r\n      const texts = {\r\n        'idle': '空闲',\r\n        'charging': '充电中',\r\n        'maintenance': '维护中',\r\n        'error': '故障'\r\n      }\r\n      return texts[status] || status\r\n    },\r\n    showAddDialog() {\r\n      this.dialogTitle = '添加充电站'\r\n      this.isEdit = false\r\n      this.stationForm = {\r\n        name: '',\r\n        location: '',\r\n        power_output: 0\r\n      }\r\n      this.dialogVisible = true\r\n    },\r\n    handleEdit(row) {\r\n      this.dialogTitle = '编辑充电站'\r\n      this.isEdit = true\r\n      this.currentId = row.id\r\n      this.stationForm = { ...row }\r\n      this.dialogVisible = true\r\n    },\r\n    async handleDelete(row) {\r\n      try {\r\n        await ElMessageBox.confirm('确定要删除这个充电站吗？', '提示', {\r\n          type: 'warning'\r\n        })\r\n        await stationApi.delete(row.id)\r\n        ElMessage.success('删除成功')\r\n        this.fetchStations()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败')\r\n          console.error(error)\r\n        }\r\n      }\r\n    },\r\n    async handleSave() {\r\n      try {\r\n        if (this.isEdit) {\r\n          await stationApi.update(this.currentId, this.stationForm)\r\n          ElMessage.success('更新成功')\r\n        } else {\r\n          await stationApi.add(this.stationForm)\r\n          ElMessage.success('添加成功')\r\n        }\r\n        this.dialogVisible = false\r\n        this.fetchStations()\r\n      } catch (error) {\r\n        ElMessage.error(this.isEdit ? '更新失败' : '添加失败')\r\n        console.error(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stations-container {\r\n  padding: 20px;\r\n}\r\n.toolbar {\r\n  margin-bottom: 20px;\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}